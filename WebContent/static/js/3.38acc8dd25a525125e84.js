webpackJsonp([3],{"162o":function(module,exports,__webpack_require__){(function(global){var scope=void 0!==global&&global||"undefined"!=typeof self&&self||window,apply=Function.prototype.apply;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,scope,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,scope,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout&&timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(scope,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;msecs>=0&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},__webpack_require__("mypn"),exports.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==global&&global.setImmediate||this&&this.setImmediate,exports.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==global&&global.clearImmediate||this&&this.clearImmediate}).call(exports,__webpack_require__("DuR2"))},"5PeR":function(module,exports){},IgG3:function(module,exports){},Quw4:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var js_cookie=__webpack_require__("lbHh"),js_cookie_default=__webpack_require__.n(js_cookie),utils=__webpack_require__("oAV5"),firstreset={name:"usercenter",props:{modal:{type:Boolean,required:!0},username:{type:String,required:!0},password:{type:String,required:!0}},data:function(){return{modal1:!1,formValidate:{password:"",newpassword:"",confirmpassword:""},ruleValidate:{}}},watch:{modal:function(val){this.modal1=val},modal1:function(val){this.$emit("update:modal",val)}},methods:{resetPassword:function(){var me=this,params={userid:me._props.username,username:me._props.password,userpassword:me.formValidate.newpassword,remark:me.formValidate.confirmpassword};this.$axios.post("/user/mustchangepwd.do",utils.a.addPreParams(params,"user",!0)).then(function(res){res.success&&(me.$parent.password=me.formValidate.newpassword,me.$parent.login())})},cancel:function(){this.formValidate.password="",this.formValidate.newpassword="",this.formValidate.confirmpassword=""}}},components_firstreset={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("Modal",{attrs:{title:"修改用户密码","class-name":"vertical-center-modal"},on:{"on-ok":_vm.resetPassword,"on-cancel":_vm.cancel},model:{value:_vm.modal1,callback:function($$v){_vm.modal1=$$v},expression:"modal1"}},[_c("Form",{ref:"formValidate",attrs:{"label-position":"left",model:_vm.formValidate,rules:_vm.ruleValidate,"label-width":80}},[_c("FormItem",{attrs:{label:"新密码",prop:"newpassword"}},[_c("Input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:_vm.formValidate.newpassword,callback:function($$v){_vm.$set(_vm.formValidate,"newpassword",$$v)},expression:"formValidate.newpassword"}})],1),_vm._v(" "),_c("FormItem",{attrs:{label:"确认新密码",prop:"newpassword"}},[_c("Input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:_vm.formValidate.confirmpassword,callback:function($$v){_vm.$set(_vm.formValidate,"confirmpassword",$$v)},expression:"formValidate.confirmpassword"}})],1)],1)],1)},staticRenderFns:[]};var mis_components_firstreset=__webpack_require__("VU/8")(firstreset,components_firstreset,!1,function(ssrContext){__webpack_require__("5PeR")},null,null).exports,views_login=(__webpack_require__("162o"),{name:"login",components:{firstreset:mis_components_firstreset},data:function(){return{modal:!1,clientHeight:document.body.clientHeight,loading:!1,pt:250,username:"",password:"",single:!1,ptScale:250/document.body.clientHeight}},mounted:function(){var me=this;me.checkCookie()&&(me.single=!0),window.onresize=function(){me.changeHeight()};for(var bgList=[],i=1;i<18;i++){var item="";item=i<10?"url(static/loginbg/0"+i+".jpg":"url(static/loginbg/"+i+".jpg",bgList.push(item)}var login=document.getElementById("login"),index=parseInt(Math.random()*(bgList.length-1));login.style.backgroundImage=bgList[index]},methods:{login:function(){var me=this,params=new URLSearchParams;params.append("userid",me.username),params.append("userpassword",me.password),this.loading=!0,this.$axios.post("user/login.do",params).then(function(res){me.loading=!1,res.success?(res.data=JSON.parse(res.data),me.$store.commit("changeLogin",res.data.user),me.$store.commit("initMenu",{menugroups:res.data.menugroups,menus:res.data.menus}),js_cookie_default.a.set("username",me.username),js_cookie_default.a.set("activeindex",0),js_cookie_default.a.set("activename","0-0"),me.single?me.checkCookie()||(me.setCookie("username",me.username),me.setCookie("password",me.password)):me.checkCookie()&&me.clearCookie(me),me.$router.push({name:"index"})):"ChangePassword"===res.data&&(me.modal=!0)})},setCookie:function(cname,value){var now=new Date;now.setDate(now.getDate()+7),document.cookie=cname+"="+value+";expires="+now.toGMTString()},getCookie:function(cname){for(var cookieArray=document.cookie.split(";"),len=cookieArray.length,i=0;i<len;i++)if(" "===cookieArray[i].charAt(0)){var len2=cookieArray[i].length;cookieArray[i]=cookieArray[i].substring(1,len2);var cookieItemArr=cookieArray[i].split("=");if(-1!==cookieItemArr.indexOf(cname)&&""!==cookieItemArr[1])return cookieItemArr}return""},clearCookie:function(me){me.setCookie(" username","",-1),me.setCookie(" password","",-1)},checkCookie:function(){var username=this.getCookie("username"),password=this.getCookie("password");return""!==username&&""!==password&&(this.username=username[1],this.password=password[1],!0)},changeHeight:function(){this.clientHeight=document.body.clientHeight,this.pt=parseInt(this.clientHeight*this.ptScale)}}}),selectortype_template_index_0_src_views_login={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"loginContainer",attrs:{id:"login"}},[_c("div",{staticClass:"loginOver loginMain"},[_c("div",{staticClass:"left loginPanel"},[_vm._m(0),_vm._v(" "),_c("div",[_c("Row",{staticClass:"overflow"},[_c("i",{staticClass:"iconfont icon-yonghu loginIcon"}),_vm._v(" "),_c("Input",{staticClass:"loginInput",staticStyle:{"padding-bottom":"20px"},attrs:{placeholder:"请输入用户名"},model:{value:_vm.username,callback:function($$v){_vm.username=$$v},expression:"username"}})],1),_vm._v(" "),_c("Row",{staticClass:"overflow"},[_c("i",{staticClass:"iconfont icon-biaoshilei_yuechi loginIcon"}),_vm._v(" "),_c("Input",{staticClass:"loginInput",attrs:{placeholder:"请输入密码",type:"password"},nativeOn:{keyup:function($event){return"button"in $event||!_vm._k($event.keyCode,"enter",13,$event.key,"Enter")?_vm.login($event):null}},model:{value:_vm.password,callback:function($$v){_vm.password=$$v},expression:"password"}})],1)],1),_vm._v(" "),_c("Row",{staticClass:"threeText"},[_c("Col",{attrs:{span:"8"}},[_c("Checkbox",{model:{value:_vm.single,callback:function($$v){_vm.single=$$v},expression:"single"}},[_vm._v("记住密码")])],1)],1),_vm._v(" "),_c("Button",{staticClass:"loginBtn",attrs:{type:"primary",loading:_vm.loading},on:{click:_vm.login}},[_vm.loading?_c("span",[_vm._v("登录中...")]):_c("span",[_vm._v("登录")])])],1)]),_vm._v(" "),_c("firstreset",{attrs:{password:_vm.password,username:_vm.username,modal:_vm.modal},on:{"update:modal":function($event){_vm.modal=$event}}})],1)},staticRenderFns:[function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"loginTitleText"},[_c("img",{staticStyle:{width:"300px"},attrs:{src:__webpack_require__("k+Bo"),alt:""}})])}]};var login_Component=__webpack_require__("VU/8")(views_login,selectortype_template_index_0_src_views_login,!1,function(ssrContext){__webpack_require__("IgG3")},"data-v-2a2366f4",null);__webpack_exports__.default=login_Component.exports},"k+Bo":function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/img/bj-title.853c603.png"},mypn:function(module,exports,__webpack_require__){(function(global,process){!function(global,undefined){"use strict";if(!global.setImmediate){var registerImmediate,html,channel,messagePrefix,onGlobalMessage,nextHandle=1,tasksByHandle={},currentlyRunningATask=!1,doc=global.document,attachTo=Object.getPrototypeOf&&Object.getPrototypeOf(global);attachTo=attachTo&&attachTo.setTimeout?attachTo:global,"[object process]"==={}.toString.call(global.process)?registerImmediate=function(handle){process.nextTick(function(){runIfPresent(handle)})}:!function(){if(global.postMessage&&!global.importScripts){var postMessageIsAsynchronous=!0,oldOnMessage=global.onmessage;return global.onmessage=function(){postMessageIsAsynchronous=!1},global.postMessage("","*"),global.onmessage=oldOnMessage,postMessageIsAsynchronous}}()?global.MessageChannel?((channel=new MessageChannel).port1.onmessage=function(event){runIfPresent(event.data)},registerImmediate=function(handle){channel.port2.postMessage(handle)}):doc&&"onreadystatechange"in doc.createElement("script")?(html=doc.documentElement,registerImmediate=function(handle){var script=doc.createElement("script");script.onreadystatechange=function(){runIfPresent(handle),script.onreadystatechange=null,html.removeChild(script),script=null},html.appendChild(script)}):registerImmediate=function(handle){setTimeout(runIfPresent,0,handle)}:(messagePrefix="setImmediate$"+Math.random()+"$",onGlobalMessage=function(event){event.source===global&&"string"==typeof event.data&&0===event.data.indexOf(messagePrefix)&&runIfPresent(+event.data.slice(messagePrefix.length))},global.addEventListener?global.addEventListener("message",onGlobalMessage,!1):global.attachEvent("onmessage",onGlobalMessage),registerImmediate=function(handle){global.postMessage(messagePrefix+handle,"*")}),attachTo.setImmediate=function(callback){"function"!=typeof callback&&(callback=new Function(""+callback));for(var args=new Array(arguments.length-1),i=0;i<args.length;i++)args[i]=arguments[i+1];var task={callback:callback,args:args};return tasksByHandle[nextHandle]=task,registerImmediate(nextHandle),nextHandle++},attachTo.clearImmediate=clearImmediate}function clearImmediate(handle){delete tasksByHandle[handle]}function runIfPresent(handle){if(currentlyRunningATask)setTimeout(runIfPresent,0,handle);else{var task=tasksByHandle[handle];if(task){currentlyRunningATask=!0;try{!function(task){var callback=task.callback,args=task.args;switch(args.length){case 0:callback();break;case 1:callback(args[0]);break;case 2:callback(args[0],args[1]);break;case 3:callback(args[0],args[1],args[2]);break;default:callback.apply(undefined,args)}}(task)}finally{clearImmediate(handle),currentlyRunningATask=!1}}}}}("undefined"==typeof self?void 0===global?this:global:self)}).call(exports,__webpack_require__("DuR2"),__webpack_require__("W2nU"))}});